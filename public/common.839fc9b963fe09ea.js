"use strict";(self.webpackChunkjopaka=self.webpackChunkjopaka||[]).push([[592],{87:(g,_,a)=>{a.d(_,{i:()=>l});var n=a(8505),i=a(2340),r=a(5e3),c=a(520),d=a(1083);let l=(()=>{class p{constructor(t,o,s){this.http=t,this.router=o,this.ngZone=s,this.baseUrl=i.N.baseUrl,this.googleInit()}googleInit(){return new Promise(t=>{gapi.load("auth2",()=>{this.auth2=gapi.auth2.init({client_id:"86407381520-b22aanmqdi3q61d62sec545cr2curik1.apps.googleusercontent.com",cookiepolicy:"sinost_origin"}),t()})})}logout(){localStorage.removeItem("token"),localStorage.removeItem("role"),this.userRole="",this.auth2.signOut().then(()=>{this.ngZone.run(()=>{this.router.navigateByUrl("/jopaka")})})}getRole(){return this.userRole=localStorage.getItem("role"),this.userRole}crearUsuario(t){return console.log("creado usuario"),this.http.post(`${this.baseUrl}/auth/cliente`,t)}crearSolicitud(t){return console.log("generadno solicitud"),this.http.post(`${this.baseUrl}/auth/nutriologo`,t)}loginGoogle(t){return this.http.post(`${this.baseUrl}/auth/logIn`,t).pipe((0,n.b)(o=>{localStorage.setItem("token",o.toekn)}))}validarToken(){return""!==(localStorage.getItem("token")||"")}generarCodigo(t){return this.http.get(`${this.baseUrl}/auth/sendCode?celular=${t}`)}verificarCodigo(t,o){return this.http.get(`${this.baseUrl}/auth/verifyCode?celular=${t}&code=${o}`)}}return p.\u0275fac=function(t){return new(t||p)(r.LFG(c.eN),r.LFG(d.F0),r.LFG(r.R0b))},p.\u0275prov=r.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},6088:(g,_,a)=>{a.d(_,{p:()=>d});var n=a(520),i=a(2340),r=a(5e3),c=a(1083);let d=(()=>{class l{constructor(e,t){this.http=e,this.router=t,this.baseUrl=i.N.baseUrl,this.apiUrl=`${this.baseUrl}/administrador`}getUsuarios(e){return this.http.get(`${this.apiUrl}/user`,{headers:(new n.WM).set("jopakatoken",e)})}getNutriologos(e){return this.http.get(`${this.apiUrl}/nutriologo`,{headers:(new n.WM).set("jopakatoken",e)})}getBaneadosN(e){return this.http.get(`${this.apiUrl}/nutriologo?baneado=true`,{headers:(new n.WM).set("jopakatoken",e)})}getBaneadosC(e){return this.http.get(`${this.apiUrl}/user?baneado=true`,{headers:(new n.WM).set("jopakatoken",e)})}getSolicitudes(e){return this.http.get(`${this.apiUrl}/soli/`,{headers:(new n.WM).set("jopakatoken",e)})}getReportes(e,t){return this.http.get(`${this.apiUrl}/reporte/user?id=${t}`,{headers:(new n.WM).set("jopakatoken",e)})}deleteReporte(e,t){return this.http.put(`${this.apiUrl}/reporte/quitar/?id=${t}`,t,{headers:(new n.WM).set("jopakatoken",e)})}acceptRequest(e,t){return console.log("aceptando soli"),this.http.post(`${this.apiUrl}/soli/accepted`,{id:t},{headers:(new n.WM).set("jopakatoken",e)})}denyRequest(e,t){return console.log("denegando soli"),this.http.put(`${this.apiUrl}/soli/denied`,{id:t},{headers:(new n.WM).set("jopakatoken",e)})}getAdmin(e){return this.http.get(`${this.apiUrl}/data`,{headers:(new n.WM).set("jopakatoken",e)})}updateAdmin(e,t,o){const s=new FormData;return""!=t.imagen&&s.append("imagen",t.imagen),t.nombre!=o.nombre&&s.append("nombre",t.nombre),t.apellidos!=o.apellidos&&s.append("apellidos",t.apellidos),t.celular!=o.celular&&s.append("celular",t.celular),this.http.put(`${this.apiUrl}/update`,s,{headers:(new n.WM).set("jopakatoken",e)})}postAdmin(e,t){return this.http.post(`${this.baseUrl}/auth/administrador`,t,{headers:(new n.WM).set("jopakatoken",e)})}}return l.\u0275fac=function(e){return new(e||l)(r.LFG(n.eN),r.LFG(c.F0))},l.\u0275prov=r.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},9603:(g,_,a)=>{a.d(_,{$:()=>d});var n=a(520),i=a(2340),r=a(5e3),c=a(1083);let d=(()=>{class l{constructor(e,t){this.http=e,this.router=t,this.baseUrl=i.N.baseUrl,this.apiUrl=`${this.baseUrl}/usuarios`}getProgreso(e,t){return this.http.get(`${this.apiUrl}/progreso?id=${t}`,{headers:(new n.WM).set("jopakatoken",e)})}getServicios(e){return this.http.get(`${this.apiUrl}/servicio`,{headers:(new n.WM).set("jopakatoken",e)})}getChatData(e,t){return this.http.get(`${this.apiUrl}/servicioChat`,{headers:(new n.WM).set("jopakatoken",e),params:(new n.LE).set("id_servicio",t)})}getReportesMotivo(e){return this.http.get(`${this.apiUrl}/motivos`,{headers:(new n.WM).set("jopakatoken",e)})}putReporte(e,t){return this.http.put(`${this.apiUrl}/reportar`,t,{headers:(new n.WM).set("jopakatoken",e)})}getCliente(e){return this.http.get(`${this.apiUrl}/data`,{headers:(new n.WM).set("jopakatoken",e)})}getPagos(e){return this.http.get(`${this.apiUrl}/registroPagos`,{headers:(new n.WM).set("jopakatoken",e)})}getPago(e,t){return this.http.get(`${this.apiUrl}/pagos?index=${t}`,{responseType:"arraybuffer",headers:(new n.WM).set("jopakatoken",e)})}getDieta(e,t,o){return this.http.get(`${this.apiUrl}/historial?indice=${t}&id=${o}`,{responseType:"arraybuffer",headers:(new n.WM).set("jopakatoken",e)})}getExtras(e){return this.http.get(`${this.apiUrl}/extra`,{headers:(new n.WM).set("jopakatoken",e)})}updateCliente(e,t,o){const s=new FormData;return""!=t.imagen&&s.append("imagen",t.imagen),t.nombre!=o.nombre&&s.append("nombre",t.nombre),t.apellidos!=o.apellidos&&s.append("apellidos",t.apellidos),t.celular!=o.celular&&s.append("celular",t.celular),this.http.put(`${this.apiUrl}/`,s,{headers:(new n.WM).set("jopakatoken",e)})}postExtra(e,t){return this.http.post(`${this.apiUrl}/extra/alta`,t,{headers:(new n.WM).set("jopakatoken",e)})}deleteCliente(e){return this.http.delete(`${this.apiUrl}/`,{headers:(new n.WM).set("jopakatoken",e)})}}return l.\u0275fac=function(e){return new(e||l)(r.LFG(n.eN),r.LFG(c.F0))},l.\u0275prov=r.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},3249:(g,_,a)=>{a.d(_,{l:()=>d});var n=a(520),i=a(2340),r=a(5e3),c=a(1083);let d=(()=>{class l{constructor(e,t){this.http=e,this.router=t,this.baseUrl=i.N.baseUrl,this.apiUrl=`${this.baseUrl}/nutriologo`}getPacientes(e){return this.http.get(`${this.apiUrl}/pacientes`,{headers:(new n.WM).set("jopakatoken",e)})}getPredeterminados(e){return this.http.get(`${this.apiUrl}/predeterminado`,{headers:(new n.WM).set("jopakatoken",e)})}createPredeterminado(e,t){return this.http.post(`${this.apiUrl}/predeterminado`,t,{headers:(new n.WM).set("jopakatoken",e)})}updatePredeterminado(e,t,o){return this.http.put(`${this.apiUrl}/predeterminado`,{nombreAnterior:t,nuevoNombre:o.nuevoNombre,texto:o.texto},{headers:(new n.WM).set("jopakatoken",e)})}deletePredeterminado(e,t){return this.http.delete(`${this.apiUrl}/predeterminado?nombre=${t}`,{headers:(new n.WM).set("jopakatoken",e)})}getChatData(e,t){return this.http.get(`${this.apiUrl}/servicioChat`,{headers:(new n.WM).set("jopakatoken",e),params:(new n.LE).set("id_servicio",t)})}getReportesMotivo(e){return this.http.get(`${this.apiUrl}/motivos`,{headers:(new n.WM).set("jopakatoken",e)})}putReporte(e,t){return this.http.put(`${this.apiUrl}/reportar?`,t,{headers:(new n.WM).set("jopakatoken",e)})}getNutriologo(e){return this.http.get(`${this.apiUrl}/data`,{headers:(new n.WM).set("jopakatoken",e)})}updateNutriologo(e,t,o){const s=new FormData;return""!=t.imagen&&s.append("imagen",t.imagen),t.nombre!=o.nombre&&s.append("nombre",t.nombre),t.apellidos!=o.apellidos&&s.append("apellidos",t.apellidos),t.celular!=o.celular&&s.append("celular",t.celular),this.http.put(`${this.apiUrl}/`,s,{headers:(new n.WM).set("jopakatoken",e)})}updateServicio(e,t){return this.http.put(`${this.apiUrl}/servicio`,t,{headers:(new n.WM).set("jopakatoken",e)})}updateHorario(e,t){const o={fechas:t};return console.log(o),this.http.put(`${this.apiUrl}/fechas`,o,{headers:(new n.WM).set("jopakatoken",e)})}deleteNutriologo(e){return this.http.delete(`${this.apiUrl}/`,{headers:(new n.WM).set("jopakatoken",e)})}}return l.\u0275fac=function(e){return new(e||l)(r.LFG(n.eN),r.LFG(c.F0))},l.\u0275prov=r.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},6491:(g,_,a)=>{a.d(_,{P:()=>p});var n=a(8966),i=a(5e3),r=a(9603),c=a(3249),d=a(9808);function l(e,t){if(1&e&&(i.TgZ(0,"div")(1,"p"),i._uU(2),i.qZA(),i._UZ(3,"hr")(4,"br")(5,"br"),i.TgZ(6,"h5"),i._uU(7,"Here the chat :D"),i.qZA()()),2&e){const o=i.oxw();i.xp6(2),i.AsE(" ",o.chatData.nombre," ",o.chatData.apellidos," ")}}let p=(()=>{class e{constructor(o,s,h,m){this.dialogRef=o,this.idService=s,this.clienteService=h,this.nutriologoService=m,this.panelOpenState=!1}ngOnInit(){this.token=localStorage.getItem("token"),this.userType=localStorage.getItem("role"),"Cliente"==this.userType&&this.clienteService.getChatData(this.token,this.idService).subscribe({next:o=>this.chatData=o,complete:()=>{console.log(this.chatData)}}),"Nutri\xf3logo"==this.userType&&this.nutriologoService.getChatData(this.token,this.idService).subscribe({next:o=>this.chatData=o,complete:()=>{console.log(this.chatData)}})}}return e.\u0275fac=function(o){return new(o||e)(i.Y36(n.so),i.Y36(n.WI),i.Y36(r.$),i.Y36(c.l))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-chat"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(o,s){1&o&&i.YNc(0,l,8,2,"div",0),2&o&&i.Q6J("ngIf",s.chatData)},directives:[d.O5],styles:[""]}),e})()},6638:(g,_,a)=>{a.d(_,{V:()=>s});var n=a(3075),i=a(8966),r=a(5e3),c=a(9603),d=a(3249),l=a(1271),p=a(5245),e=a(9814),t=a(9808);function o(h,m){if(1&h&&(r.TgZ(0,"mat-radio-button",14),r._uU(1),r.qZA()),2&h){const u=m.$implicit;r.s9C("value",u._id),r.xp6(1),r.hij(" ",u.descripcion," ")}}let s=(()=>{class h{constructor(u,v,M,U,E,f){this.dialogRef=u,this.idService=v,this.clienteService=M,this.nutriologoService=U,this.formBuilder=E,this.snackBar=f,this.panelOpenState=!1,this.reportFormGroup=this.formBuilder.group({idServicio:[this.idService],idReporte:["",n.kI.required],msg:[""]})}ngOnInit(){this.token=localStorage.getItem("token"),this.userType=localStorage.getItem("role"),"Cliente"==this.userType&&this.clienteService.getReportesMotivo(this.token).subscribe({next:u=>this.reportesMotivo=u,complete:()=>{console.log(this.reportesMotivo)}}),"Nutri\xf3logo"==this.userType&&this.nutriologoService.getReportesMotivo(this.token).subscribe({next:u=>this.reportesMotivo=u,complete:()=>{console.log(this.reportesMotivo)}})}enviarReporte(){"Cliente"==this.userType&&this.clienteService.putReporte(this.token,this.reportFormGroup.value).subscribe({next:()=>this.openSnackBar(),error:u=>{console.log(u),this.openSnackBarBad()}}),"Nutri\xf3logo"==this.userType&&this.nutriologoService.putReporte(this.token,this.reportFormGroup.value).subscribe({next:()=>this.openSnackBar(),error:u=>{console.log(u),this.openSnackBarBad()}})}openSnackBarBad(){this.snackBar.open("\u274c No puedes enviar m\xe1s de 2 reportes por servicio ","\u2716",{horizontalPosition:"start",verticalPosition:"bottom",duration:7e3})}openSnackBar(){this.snackBar.open("\u2705 El reporte ha sido enviado","\u2716",{horizontalPosition:"start",verticalPosition:"bottom",duration:7e3}),localStorage.removeItem("succes")}}return h.\u0275fac=function(u){return new(u||h)(r.Y36(i.so),r.Y36(i.WI),r.Y36(c.$),r.Y36(d.l),r.Y36(n.qu),r.Y36(l.ux))},h.\u0275cmp=r.Xpm({type:h,selectors:[["app-reportes"]],decls:23,vars:3,consts:[["action","",1,"container",3,"formGroup"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["id","icon"],["mat-dialog-close","",1,"btn-close"],[1,"modal-body"],[1,"mb-3"],[1,"col-form-label"],["matInput","","aria-label","Select an option","formControlName","idReporte",1,"report-radio-group"],["class","report-radio-button",3,"value",4,"ngFor","ngForOf"],["formControlName","msg","placeholder","Razones del reporte",1,"form-control"],[1,"modal-footer"],["mat-dialog-close","",1,"btn","btn-outline-secondary","btn-sm"],["mat-dialog-close","",1,"btn","btn-danger","btn-sm",3,"disabled","click"],[1,"report-radio-button",3,"value"]],template:function(u,v){1&u&&(r.TgZ(0,"form",0)(1,"div",1)(2,"h5",2)(3,"mat-icon",3),r._uU(4,"warning"),r.qZA(),r._uU(5," Reportar "),r.qZA(),r._UZ(6,"button",4),r.qZA(),r.TgZ(7,"div",5)(8,"div",6)(9,"label",7),r._uU(10,"Tipo de reporte * :"),r.qZA(),r.TgZ(11,"mat-radio-group",8),r.YNc(12,o,2,2,"mat-radio-button",9),r.qZA()(),r.TgZ(13,"div",6)(14,"label",7),r._uU(15,"Detalles:"),r.qZA(),r.TgZ(16,"textarea",10),r._uU(17,"  "),r.qZA()()(),r.TgZ(18,"div",11)(19,"button",12),r._uU(20,"Cancelar"),r.qZA(),r.TgZ(21,"button",13),r.NdJ("click",function(){return v.enviarReporte()}),r._uU(22," Enviar Reporte "),r.qZA()()()),2&u&&(r.Q6J("formGroup",v.reportFormGroup),r.xp6(12),r.Q6J("ngForOf",v.reportesMotivo),r.xp6(9),r.Q6J("disabled",v.reportFormGroup.invalid))},directives:[n._Y,n.JL,n.sg,p.Hw,i.ZT,e.VQ,n.JJ,n.u,t.sg,e.U0,n.Fj],styles:["h5[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center}button[_ngcontent-%COMP%]:focus{box-shadow:none}textarea[_ngcontent-%COMP%]{min-height:130px;max-height:130px}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#255388;box-shadow:none}label[_ngcontent-%COMP%]{font-weight:500}#icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px;color:red}.container[_ngcontent-%COMP%]{width:600px;height:100%;margin:-22px;padding:0}.report-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:5px 0;align-items:flex-start;font-size:13x}.report-radio-button[_ngcontent-%COMP%]{margin:5px 20px}"]}),h})()},5861:(g,_,a)=>{function n(r,c,d,l,p,e,t){try{var o=r[e](t),s=o.value}catch(h){return void d(h)}o.done?c(s):Promise.resolve(s).then(l,p)}function i(r){return function(){var c=this,d=arguments;return new Promise(function(l,p){var e=r.apply(c,d);function t(s){n(e,l,p,t,o,"next",s)}function o(s){n(e,l,p,t,o,"throw",s)}t(void 0)})}}a.d(_,{Z:()=>i})}}]);